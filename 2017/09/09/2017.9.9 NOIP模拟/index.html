<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="by XLJ"><meta name="description" conauthortent="laji OIer"><link rel="alternative" href="/atom.xml" title="XLJ's blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><title>2017.9.9 NOIP模拟 - XLJ's blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">XLJ's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ（目录）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">について（关于）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/L-link">友達（友链）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-09-09T06:03:54.776Z">September 09, 2017</time><h1 class="post__title"><a href="/2017/09/09/2017.9.9 NOIP模拟/">2017.9.9 NOIP模拟</a></h1><div class="post__main echo"><p>分数：210(100+100+10)<br>这个题难度不大，但是<br>最后一题30分打炸..</p>
<h1 id="循环移动"><a href="#循环移动" class="headerlink" title="循环移动"></a>循环移动</h1><p>(cyclic.cpp/c/pas)(1s/256M)</p>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>给出一个字符串 S 与 N 个操作。每个操作用三元组(L, R, K)进行描述：操作将字<br>符串第 L 个到第 R 个位置构成的子串循环移动 K 次。一次循环移动就是将字符<br>串最后的这个字符移动到第一位，其余的字符顺次后移。<br>例如，对于字符串 abacaba，操作(L=3, R=6, K=1)后得到的字符串即为 abbacaa。<br>求出在 N 个操作后得到的字符串。</p>
<h2 id="输入格式-cyclic-in"><a href="#输入格式-cyclic-in" class="headerlink" title="输入格式(cyclic.in)"></a>输入格式(cyclic.in)</h2><p>第一行一个字符串 S。<br>第二行一个整数 N，代表操作的总数。<br>接下来 N 行每行三个数 L,R,K，每行代表一个操作。</p>
<h2 id="输出格式-cyclic-out"><a href="#输出格式-cyclic-out" class="headerlink" title="输出格式(cyclic.out)"></a>输出格式(cyclic.out)</h2><p>一行一个字符串，代表 N 个操作后的字符串。</p>
<h2 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h2><p>abbacaa<br>2<br>3 6 1<br>1 4 2</p>
<h2 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h2><p>ababaca</p>
<h2 id="数据范围与约束"><a href="#数据范围与约束" class="headerlink" title="数据范围与约束"></a>数据范围与约束</h2><p>设|S|为字符串 S 的长度。<br>对于 30%的数据，|S|&lt;=100, N&lt;=100, K&lt;=100<br>对于 100%的数据，|S|&lt;=10000, N&lt;=300, K&lt;=1000,000,1&lt;=L&lt;=R&lt;=|S|</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>模拟<br>(PS:我做完&amp;&amp;确认这个题正确的时候，**阳就做完了所有题&amp;&amp;拿到了超高的分。。。%%%%)<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">char</span> s[<span class="number">15000</span>];<span class="keyword">char</span> tmp[<span class="number">15000</span>];</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="meta">#<span class="meta-keyword">ifdef</span> XLJ</span></div><div class="line">		freopen(<span class="string">"C:\\Users\\pc\\Desktop\\input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	<span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">	freopen(<span class="string">"cyclic.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cyclic.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">int</span> l,r,x;</div><div class="line">	<span class="keyword">int</span> len=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;l,&amp;r,&amp;x);</div><div class="line">		<span class="keyword">if</span>(l==r) <span class="keyword">continue</span>;</div><div class="line">		x%=(r-l+<span class="number">1</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=r-x+<span class="number">1</span>;i&lt;=r;i++) tmp[i-r+x<span class="number">-1</span>+l]=s[i];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=l+x;i&lt;=r;i++) tmp[i]=s[i-x];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=l;i&lt;=r;i++) s[i]=tmp[i];</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对拍的rand程序<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"C:\\Users\\pc\\Desktop\\input.txt"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	srand(<span class="number">19270818</span>);</div><div class="line">	<span class="keyword">int</span> n=<span class="number">10000</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%c"</span>,<span class="string">'a'</span>+rand()%<span class="number">26</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"\n300\n"</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">300</span>;i++)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"1 10000 %d\n"</span>,rand()%<span class="number">1000000</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="阅读计划"><a href="#阅读计划" class="headerlink" title="阅读计划"></a>阅读计划</h1><p>(book.cpp/c/pas)(1s/256M)</p>
<h2 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h2><p>暑假到了，Rick 制定了一个长达 M 天的阅读计划。他一共有 N 本书，从 1 至 N<br>进行标号；Rick 将它们从上至下摞成一堆。他每天都会读一本书，假设他要读<br>编号为 X 的书，他会按照以下步骤：</p>
<ol>
<li>将这本书上方的所有书搬起来</li>
<li>将这本书拿出来</li>
<li>将搬起来的书摞回去</li>
<li>看完后把这本书放到顶端<br>每本书都会有各自的重量，Rick 不希望搬起太过重的书。于是他希望能重新安<br>排这 N 本书的顺序，使得读完 M 本书之后，搬书的重量之和最小。<h2 id="输入格式-book-in"><a href="#输入格式-book-in" class="headerlink" title="输入格式(book.in)"></a>输入格式(book.in)</h2>第一行两个整数 N 与 M，分别代表书的数量和阅读的天数。<br>第二行 N 个整数，代表每本书的重量。<br>第三行 M 个整数，代表每天要读的书的编号。<h2 id="输出格式-book-out"><a href="#输出格式-book-out" class="headerlink" title="输出格式(book.out)"></a>输出格式(book.out)</h2>一行一个整数，代表最小的重量之和。<h2 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h2>3 5<br>1 2 3<br>1 3 2 3 1<h2 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h2>12<h2 id="样例解释"><a href="#样例解释" class="headerlink" title="样例解释"></a>样例解释</h2>DAY1 ： 1 3 2 – 搬起重量 = 0<br>DAY2 ： 1 3 2 – 搬起重量 = 1<br>DAY3 ： 3 1 2 – 搬起重量 = 4<br>DAY4 ： 2 3 1 – 搬起重量 = 2<br>DAY5 ： 3 2 1 – 搬起重量 = 5<br>总和 = 0 + 1 + 4 + 2 + 5 = 12<h2 id="数据范围与约束-1"><a href="#数据范围与约束-1" class="headerlink" title="数据范围与约束"></a>数据范围与约束</h2>对于 30%的数据，N&lt;=10.<br>对于 100%的数据，2&lt;=N&lt;=500, 1&lt;=M&lt;=1000, 每本书重量不超过 100.<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2>类似维护一个队列<br>我们可以知道第i天的时候最上面的书一定是前一天读的书，所以，模拟计算即可<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> b[<span class="number">1500</span>];<span class="keyword">int</span> q[<span class="number">15000</span>];</div><div class="line"><span class="keyword">int</span> pos[<span class="number">1500</span>];<span class="keyword">int</span> c[<span class="number">1500</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="meta">#<span class="meta-keyword">ifdef</span> XLJ</span></div><div class="line">		freopen(<span class="string">"C:\\Users\\pc\\Desktop\\input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	<span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">	freopen(<span class="string">"book.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"book.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n,m;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i]);</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;<span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">		<span class="keyword">if</span>(!pos[c[i]])&#123;	</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=cnt;j++)</div><div class="line">				ans+=b[q[j]];</div><div class="line">			q[++cnt]=c[i];	</div><div class="line">			pos[c[i]]=cnt; </div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=pos[c[i]]+<span class="number">1</span>;j&lt;=cnt;j++)</div><div class="line">				ans+=b[q[j]];</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=pos[c[i]];j&lt;cnt;j++)</div><div class="line">				q[j]=q[j+<span class="number">1</span>],pos[q[j]]--;</div><div class="line">			q[cnt]=c[i];</div><div class="line">			pos[c[i]]=cnt;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>暴力对拍程序..调这个我调了好久，不过对拍出了我以前程序的问题。。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">bool</span> flag[<span class="number">15</span>]; </div><div class="line"><span class="keyword">int</span> b[<span class="number">15</span>];<span class="keyword">int</span> a[<span class="number">15</span>];<span class="keyword">int</span> c[<span class="number">15</span>];<span class="keyword">int</span> ttmp[<span class="number">15</span>];</div><div class="line"><span class="keyword">int</span> n,m;<span class="keyword">int</span> mn=<span class="number">0x7fffff</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(x==n+<span class="number">1</span>)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</div><div class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		 	ttmp[i]=a[i];</div><div class="line">		<span class="keyword">int</span> tmp=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</div><div class="line">				<span class="keyword">if</span>(ttmp[j]==c[i])&#123;</div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> k=j+<span class="number">1</span>;k&lt;=n;k++)</div><div class="line">					&#123;</div><div class="line">						tmp+=b[ttmp[k]];</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> k=j;k&lt;n;k++)&#123;</div><div class="line">						ttmp[k]=ttmp[k+<span class="number">1</span>];</div><div class="line">					&#125;</div><div class="line">					ttmp[n]=c[i];</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;	</div><div class="line">		&#125;</div><div class="line">		mn=min(mn,tmp);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"tmp=%d\n"</span>,tmp);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="keyword">if</span>(!flag[i])</div><div class="line">		&#123;</div><div class="line">			a[x]=i;</div><div class="line">			flag[i]=<span class="number">1</span>;</div><div class="line">			dfs(x+<span class="number">1</span>);</div><div class="line">			flag[i]=<span class="number">0</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="meta">#<span class="meta-keyword">ifdef</span> XLJ</span></div><div class="line">		freopen(<span class="string">"C:\\Users\\pc\\Desktop\\input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	<span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i]);</div><div class="line">	dfs(<span class="number">1</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,mn);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="树集"><a href="#树集" class="headerlink" title="树集"></a>树集</h1><p>(set.cpp/c/pas)(1s/256M)</p>
<h2 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h2><p>给出一棵 N 个节点的树，每个节点上都附有一个权值 ai。现在 Ann 想从中选出<br>若干个节点，满足以下条件：</p>
<ol>
<li>至少选出一个节点</li>
<li>节点之间是连通的</li>
<li>设节点中权值最大的为 ap，最小的为 aq，则需要满足 ap-aq 不大于某个定值<br>D。<br>Ann 想知道有多少种选择的方式？结果对 1,000,000,007 取模即可。<h2 id="输入格式-set-in"><a href="#输入格式-set-in" class="headerlink" title="输入格式(set.in)"></a>输入格式(set.in)</h2>第一行包含两个整数 D, N，分别代表定值 D 与节点总数 N。<br>第二行包含 N 个整数 ai，分别代表每个点的权值。<br>接下来 N-1 行，每行包含两个数 u, v，代表树中节点 u 与节点 v 是相连的。<h2 id="输出格式-set-out"><a href="#输出格式-set-out" class="headerlink" title="输出格式(set.out)"></a>输出格式(set.out)</h2>一个整数，代表方案数模 1,000,000,007 的结果。<h2 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h2>1 4<br>2 1 3 2<br>1 2<br>1 3<br>3 4<h2 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h2>8<h2 id="样例解释-1"><a href="#样例解释-1" class="headerlink" title="样例解释"></a>样例解释</h2>8 个选择方式为：{1}, {2}, {3}, {4}, {1, 2}, {1, 3}, {3, 4}, {1, 3, 4}。<h2 id="数据范围与约束-2"><a href="#数据范围与约束-2" class="headerlink" title="数据范围与约束"></a>数据范围与约束</h2>对于 30% 的数据，1&lt;=n&lt;=10;<br>对于另外的 30% 的数据，d=2000.<br>对于 100% 的数据，0&lt;=d&lt;=2000, 1&lt;=n&lt;=2000, 1&lt;=ai&lt;=2000.<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2>开始的时候把它看成链了，答案最大就是n^2..<br>时间复杂度也是n方，然后发现mod没用<br>打完以后<br><strong>重新看题</strong><br>发现看错题了 GG。。<br>其实只算链的有30分的，但我还是打炸了<h3 id="30分题解："><a href="#30分题解：" class="headerlink" title="30分题解："></a>30分题解：</h3>1&lt;=n&lt;=10（30 分）；<br>部分分：直接暴力枚举搜索！判断这些点是否连通！判断最大最小是否差值小于<br>D！<br>在没有办法的情况下，打出搜索都可以拿到宝贵的 30 分。<br>具体做法：用并查集判断是否联通，暴力判断，非常暴力的做法<h3 id="D-2000（又-30-分）；"><a href="#D-2000（又-30-分）；" class="headerlink" title="D=2000（又 30 分）；"></a>D=2000（又 30 分）；</h3>从数据范围得知，这一部分的数据中，其实最大最小的差值都小于 D；<br>我们只需要求出有多少种不同的连通集即可；<br>采用树形 DP：设 F[i] 为以 i 为根的子树，而且必须要取节点 i 的方案数是多少。<br>则可以得到 DP 方程 F[i] =<br><strong>∏(F[x] + 1) (x 为 i 的儿子)</strong><br>意思：我可以取 x 这个儿子的连通集，共有 F[x] 种方案；也可以不取，那就是1种方案。<br>对于每个儿子，采用乘法公式，即可以求出 i 的方案。<br>最后把 F 加起来即为最后的答案。<h3 id="正解：树形DP"><a href="#正解：树形DP" class="headerlink" title="正解：树形DP"></a>正解：<strong>树形DP</strong></h3>其实可以从 60 分做法中得到思路；<strong>枚举我的集合中最小的节点 X。</strong>则能够在集合里面的节点 Y 必须满足 A[X] &lt;=A[Y] &lt;= A[X]+D。<br>我们从 X 出发，遍历（DFS/BFS）这样的 Y 节点。很显然，其余的节点都不能在<br>集合中。（要不就是权值不满足，要不就是不连通）<br>那我们在这棵子树中，以 X 为根，选取的任意连通集都是满足权值限制。<br>也就是我们<strong>通过枚举最小值</strong>来去掉权值的限制。<br>可以用之前提及的动态规划来算出来以 X 为根的结果。<br>! <strong>细节</strong>：为了<strong>避免重复</strong>，在权值一样的时候，<strong>我们还需要比较节点的编号</strong>！<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long </span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">2500</span>];<span class="keyword">int</span> head[<span class="number">2500</span>];<span class="keyword">bool</span> vis[<span class="number">2500</span>];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></div><div class="line">	<span class="keyword">int</span> to,next;</div><div class="line">&#125;e[<span class="number">50000</span>];</div><div class="line"><span class="keyword">int</span> cnt;LL ans=<span class="number">0</span>,dp[<span class="number">2500</span>];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;e[++cnt].to=y;e[cnt].next=head[x];head[x]=cnt;&#125;</div><div class="line"><span class="keyword">int</span> n,d;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> mn,<span class="keyword">int</span> mx,<span class="keyword">int</span> id)</span></span>&#123; </div><div class="line">	vis[x]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].next)&#123;</div><div class="line">		<span class="keyword">int</span> k=e[i].to;</div><div class="line">		<span class="keyword">if</span>(vis[k]) <span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(a[k]==mn&amp;&amp;k&lt;id) <span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(a[k]&lt;mn||a[k]&gt;mx) <span class="keyword">continue</span>; </div><div class="line">			dfs(k,mn,mx,id);</div><div class="line">		dp[x]=(dp[x]*dp[k]+dp[k]+dp[x])%mod;</div><div class="line">	&#125;</div><div class="line">	dp[x]++;</div><div class="line">	<span class="comment">//dp[x]%=mod;</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="meta">#<span class="meta-keyword">ifdef</span> XLJ</span></div><div class="line">		freopen(<span class="string">"C:\\Users\\pc\\Desktop\\input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	<span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">	freopen(<span class="string">"set.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"set.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;d,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		insert(x,y);insert(y,x);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">		dfs(i,a[i],a[i]+d,i);</div><div class="line">		ans=(ans+dp[i])%mod;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/NOIP模拟赛/">NOIP模拟赛</a></li></ul></footer></article><section class="reward"> <a class="btn-reward" href="#">加好友 or 打赏</a><div class="reward-wrapper clearfix"><img src="/img/QQ.jpg" title="QQ"><img src="/img/wechat.jpg" title="微信"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8yOTYwMy82MTcx"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017 by XLJ<a href="https://xianglujia.github.io/about/" target="view_window" style="color:#666;"> Welcome! </a></div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>