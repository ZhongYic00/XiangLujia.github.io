<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="by XLJ"><meta name="description" conauthortent="laji OIer"><link rel="alternative" href="/atom.xml" title="XLJ's blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><title>2017.7.16 NOIP模拟 - XLJ's blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">XLJ's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ（目录）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">について（关于）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/L-link">友達（友链）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-07-19T12:21:08.338Z">July 19, 2017</time><h1 class="post__title"><a href="/2017/07/19/2017.7.16 NOIP模拟/">2017.7.16 NOIP模拟</a></h1><div class="post__main echo"><h1 id="Nescafe-17"><a href="#Nescafe-17" class="headerlink" title="Nescafe 17"></a>Nescafe 17</h1><p><del>本人分数 120(100-10-10(真的菜啊)</del></p>
<table>
<thead>
<tr>
<th>题目名称</th>
<th>黑魔法师之门</th>
<th>守卫者的挑战</th>
<th>终极武器</th>
</tr>
</thead>
<tbody>
<tr>
<td>程序文件名</td>
<td>magician</td>
<td>guard</td>
<td>laser</td>
</tr>
<tr>
<td>输入文件名</td>
<td>magician.in</td>
<td>guard.in</td>
<td>laser.in</td>
</tr>
<tr>
<td>输出文件名</td>
<td>magician.out</td>
<td>guard.out</td>
<td>laser.out</td>
</tr>
<tr>
<td>每个测试点时限</td>
<td>1 秒</td>
<td>1 秒</td>
<td>2 秒</td>
</tr>
<tr>
<td>内存限制</td>
<td>128 MB</td>
<td>128 MB</td>
<td>128 MB</td>
</tr>
<tr>
<td>测试点数目</td>
<td>10</td>
<td>10</td>
<td>20</td>
</tr>
<tr>
<td>每个测试点分值</td>
<td>10</td>
<td>10</td>
<td>5</td>
</tr>
<tr>
<td>是否有部分分</td>
<td>无</td>
<td>无</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>提交源程序需加后缀</p>
<table>
<thead>
<tr>
<th>对于 Pascal  语言</th>
<th>magician.pas</th>
<th>guard.pas</th>
<th>laser.pas</th>
</tr>
</thead>
<tbody>
<tr>
<td>对于 C  语言</td>
<td>magician.c</td>
<td>guard.c</td>
<td>laser.c</td>
</tr>
<tr>
<td>对于 C++  语言</td>
<td>magician.cpp</td>
<td>guard.cpp</td>
<td>laser.cpp</td>
</tr>
</tbody>
</table>
<h4 id="Nescafe17-是石家庄二中-NOIP-校内测试，机房-评测-环境："><a href="#Nescafe17-是石家庄二中-NOIP-校内测试，机房-评测-环境：" class="headerlink" title="[Nescafe17] 是石家庄二中 NOIP  校内测试，机房 评测 环境："></a>[Nescafe17] 是石家庄二中 NOIP  校内测试，机房 评测 环境：</h4><h4 id="Intel-Pentium-Dual-Core-E5300-2-66GHz-2-66GHz-2-00GB-RAM"><a href="#Intel-Pentium-Dual-Core-E5300-2-66GHz-2-66GHz-2-00GB-RAM" class="headerlink" title="Intel Pentium Dual-Core E5300 @2.66GHz 2.66GHz, 2.00GB RAM"></a>Intel Pentium Dual-Core E5300 @2.66GHz 2.66GHz, 2.00GB RAM</h4><h4 id="Cena-0-8-2-Windows-7-Ultimate-x86-SP1"><a href="#Cena-0-8-2-Windows-7-Ultimate-x86-SP1" class="headerlink" title="Cena 0.8.2 @ Windows 7 Ultimate x86 SP1"></a>Cena 0.8.2 @ Windows 7 Ultimate x86 SP1</h4><h4 id="C-选手注意-Windows-7-及以上版本可以使用-lld-输入输出-64-位整数。"><a href="#C-选手注意-Windows-7-及以上版本可以使用-lld-输入输出-64-位整数。" class="headerlink" title="C++选手注意 Windows 7 及以上版本可以使用 %lld 输入输出 64 位整数。"></a>C++选手注意 Windows 7 及以上版本可以使用 %lld 输入输出 64 位整数。</h4><h1 id="黑魔法师之门-magician-pas-c-cpp"><a href="#黑魔法师之门-magician-pas-c-cpp" class="headerlink" title="黑魔法师之门 (magician.pas/c/cpp)"></a>黑魔法师之门 (magician.pas/c/cpp)</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>经过了 16 个工作日的紧张忙碌，未来的人类终于收集到了足够的能源。<br>然而在与 Violet\星球的战争中，由于 Z 副官的愚蠢，地球的领袖 applepi 被邪恶的黑魔法师 Vani 囚禁在了Violet 星球。<br>为了重启 Nescafé 这一宏伟的科技工程，人类派出了一支由 XLk、Poet_shy 和lydrainbowcat 三人组成的精英队伍，穿越时空隧道，去往 Violet 星球拯救领袖 applepi。<br>applepi 被囚禁的地点只有一扇门，当地人称它为“黑魔法师之门”。<br>这扇门上画着一张无向无权图，而打开这扇门的密码就是图中 <strong>每个点的度数大于零且都是偶数的子图的个数</strong>对 1000000009 取模的值。<br>此处子图 (V, E) 定义为：点集 V 和边集 E 都是原图的任意子集，<br>其中 E 中的边的端点都在 V 中。<br>但是 Vani 认为这样的密码过于简单，因此门上的图是动态的。起初图中只有 N 个顶点<br>而没有边。Vani 建造的门控系统共操作 M 次，每次往图中添加一条边。你必须在每个操作后都填写正确的密码，才能够打开黑魔法师的牢狱，去拯救伟大的领袖 applepi。</p>
<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含两个整数 N 和 M。<br>接下来 M 行，每行两个整数 A 和 B，代表门控系统添加了一条无向边 (A, B)。</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一共 M 行，表示每次操作后的密码。</p>
<h2 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h2><p>4 8<br>3 1<br>3 2<br>2 1<br>2 1<br>1 3<br>1 4<br>2 4<br>2 3</p>
<h2 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h2><p>0<br>0<br>1<br>3<br>7<br>7<br>15<br>31</p>
<h2 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h2><p>第三次添加之后，存在一个满足条件的子图 {1, 2, 3}（其中 1, 2, 3 是数据中边的标号）。<br>第四次添加之后，存在三个子图 {1, 2, 3}，{1, 2, 4}，{3, 4}。</p>
<h2 id="数据范围与约定"><a href="#数据范围与约定" class="headerlink" title="数据范围与约定"></a>数据范围与约定</h2><p>对于 30% 的数据，N, M≤10。<br>对于 100% 的数据，N≤200000，M≤300000。</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>仔细看一下样例 会发现一个规律</p>
<blockquote>
<p>0*2+1=1</p>
<p>1*2+1=3</p>
<p>1*2+1=7</p>
<p>7*2+1=15</p>
<p>15*2+1=31</p>
</blockquote>
<p>样例中的答案都是2的n次方减去1<br>此时可以自己画下图 证明这个是不是巧合<br>发现自己画的图还是有此规律<br>每当这个两个点以前没有连 答案不发生变化<br>否则就要乘2</p>
<p>题解上面其实是这么写的</p>
<h4 id="黑魔法师之门题解"><a href="#黑魔法师之门题解" class="headerlink" title="黑魔法师之门题解"></a>黑魔法师之门题解</h4><blockquote>
<p>题目来源：XLk 提供<br>大致思路：<br>实际上每次操作后的答案就是 2^(图中”元”环的个数) -1。<br>元环的意思如右图所示，(1-2-3-4-1)和(3-4-5-3)是元环，<br>1-2-3-5-4-1 不是，因为它可以看做由上述的两个环合成。<br><strong>因为一个环里每个点的度数都是大于零的偶数，我们可以这<br>样来构造答案：每个环有选和不选两种选择，如果选择了该<br>环，那么环上所有边的“选择次数”+1。最后取所有“选择次数”为奇数的边构成一个边集，<br>就是一个答案。可以证明这样构造出来的解不重复且涵盖了所有情况</strong>。<br>因此答案就是 2^(图中”元”环的个数)。<br>实现方法非常简单，只需要一个并查集即可。<br>具体实现方法：<br>并查集维护连通性，初始化 ans=1。<br>加入一条边(x,y)时，如果 x 和 y 在同一集合内，ans*=2。<br>每次询问输出 ans-1。<br>时间复杂度 O(Mα(N))，α(N)代表并查集的复杂度。</p>
</blockquote>
<p>所以显然代码如下<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000009</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> fa[N];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">findf</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> fa[x]==x?x:fa[x]=findf(fa[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergef</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	fa[findf(x)]=findf(y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"magician.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"magician.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n,m;</div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">	ll ans=<span class="number">0</span>;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		fa[i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span>(findf(x)!=findf(y))</div><div class="line">			mergef(x,y);</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			ans=(ans*<span class="number">2</span>+<span class="number">1</span>)%mod;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="守卫者的挑战-guard-pas-c-cpp"><a href="#守卫者的挑战-guard-pas-c-cpp" class="headerlink" title="守卫者的挑战 (guard.pas/c/cpp)"></a>守卫者的挑战 (guard.pas/c/cpp)</h1><h2 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h2><p>打开了黑魔法师 Vani 的大门，队员们在迷宫般的路上漫无目的地搜寻着关押 applepi 的 监狱的所在地。突然，眼前一道亮光闪过。<br>“我，Nizem，是黑魔法圣殿的守卫者。如果你能通过我的挑战，那么你可以带走黑魔法圣殿的地图„„”瞬间，队员们被传送到了一个擂 台上，最初身边有一个容量为K 的包包。 </p>
<p>擂台赛一共有 N 项挑战，各项挑战依次进行。第i 项挑战有一个属性 Ai，如果 Ai，表示这次挑战成功后可以再获得一个容量为 i a 的包包；如果 Ai，则表示这次挑战成功后可以得到一个大小为 1 的地图残片。</p>
<p>地图残片必须装在包包里才能带出擂台，包包没有必要全部装满，但是队员们必须把获得的所有的地图残片都带走（没有得到的不用考虑，只 需要完成所有 N 项挑战后背包容量足够容纳地图残片即可），才能拼出完整的地图。</p>
<p>并且他 们至少要挑战成功L次才能离开擂台。 队员们一筹莫展之时，善良的守卫者 Nizem 帮忙预估出了每项挑战成功的概率，其中<br>第i项挑战成功的概率为Pi。现在，请你帮忙预测一下，队员们能够带上他们获得的地图残片离开擂台的概率。 </p>
<h2 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行三个整数 N , L, K 。 第二行 N 个实数，第i个实数 Pi 表示第i项挑战成功的百分比。<br>第三行 N 个整数，第i个整数 Ai 表示第i项挑战的属性值. </p>
<h2 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h2><p>一个整数，表示所求概率，四舍五入保留 6 位小数。 </p>
<h2 id="样例输入1"><a href="#样例输入1" class="headerlink" title="样例输入1"></a>样例输入1</h2><p>3 1 0 </p>
<p>10 20 30</p>
<p>-1 -1 2 </p>
<h2 id="样例输出1"><a href="#样例输出1" class="headerlink" title="样例输出1"></a>样例输出1</h2><p>0.300000 </p>
<h2 id="样例输入2"><a href="#样例输入2" class="headerlink" title="样例输入2"></a>样例输入2</h2><p>5 1 2</p>
<p>36 44 13 83 63</p>
<p>-1 2 -1 2 1 </p>
<h2 id="样例输出2"><a href="#样例输出2" class="headerlink" title="样例输出2"></a>样例输出2</h2><p>0.980387 </p>
<h2 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h2><p>在第一个样例中，若第三项挑战成功，如果前两场中某场胜利，队员们就有空间来容纳得到的地图残片，如果挑战失败，根本就没有获得地图残片，不用考虑是否能装下；若第三项挑战失败，如果前两场有胜利，没有包来装地图残片，如果前两场都失败，不满足至少挑战成功L次的要求。因此所求概率就是第三场挑战获胜的概率。 </p>
<h2 id="数据范围与约定-1"><a href="#数据范围与约定-1" class="headerlink" title="数据范围与约定"></a>数据范围与约定</h2><p>对于 100% 的数据，保证 K&lt;=2000，N&lt;=200， -1&lt;=a[i]&lt;=1000 ， 0&lt;L&lt;=N ，<br>p[i]&lt;=100 。 </p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>经典概率dp<br>其实我在做这个题之前还是没有写过概率dp<br>只是听过概率dp这个名字 但是不知道是个什么东西<br>做了这个题以后终于有了了解</p>
<h3 id="step-1-状态转移方程"><a href="#step-1-状态转移方程" class="headerlink" title="step.1 状态转移方程"></a>step.1 状态转移方程</h3><blockquote>
<h4 id="dp-i-j-k"><a href="#dp-i-j-k" class="headerlink" title="dp[i][j][k]"></a>dp[i][j][k]</h4><h4 id="表示参加前i场比赛赢j盘-背包容量为k的概率"><a href="#表示参加前i场比赛赢j盘-背包容量为k的概率" class="headerlink" title="表示参加前i场比赛赢j盘 背包容量为k的概率"></a><strong>表示参加前i场比赛赢j盘 背包容量为k的概率</strong></h4></blockquote>
<p>因为每一场比赛只会有两种状态<br><strong>1.赢 2.输</strong><br>所以 一个比赛的状态只会由上场比赛的输赢 转移过来<br>那么就可以写出方程<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f[i+<span class="number">1</span>][j][k]+=f[i][j][k]*(<span class="number">1</span>-p) <span class="comment">//输了</span></div><div class="line">f[i+<span class="number">1</span>][j+<span class="number">1</span>][k+a[i+<span class="number">1</span>]]+=f[i][j][k]*p<span class="comment">//赢了</span></div></pre></td></tr></table></figure></p>
<p>至于为什么是f[i+1]由f[i]转移，而不是f[i]由f[i-1]转移，请看下面<br>因为 数据中写道N&lt;=200 那么可以说明包的容量最多为200<br>如果超过了200 那么肯定多余了 此时和200的作用一样<br>那么为了空间复杂度（因为开3维），此时就把f开为[205][205][205]<br>所以每次k+a[i]的时候，令k+a[i]最大为200<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> tmp=min(k+a[i],<span class="number">200</span>);</div></pre></td></tr></table></figure></p>
<p>因为是这样，只会知道这个状态转移到哪里去，但不知道这个状态是从哪个k转移过来的,因为k可能加了a[i]超200,变成200,就不知道是哪个k了<br>所以方程就是这样写</p>
<h3 id="step2-滚动数组优化"><a href="#step2-滚动数组优化" class="headerlink" title="step2.滚动数组优化"></a>step2.滚动数组优化</h3><p>显然开205 x 205 x 205的数组对空间的占用太大了，这个时候就要滚动数组了，开2x205x205就行了<br>这样节省了100倍的空间</p>
<h3 id="step3-代码"><a href="#step3-代码" class="headerlink" title="step3.代码"></a>step3.代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">double</span> f[<span class="number">2</span>][<span class="number">205</span>][<span class="number">405</span>];</div><div class="line"><span class="keyword">double</span> p[<span class="number">250</span>];</div><div class="line"><span class="keyword">int</span> a[<span class="number">250</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"guard.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"guard.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n,l,k;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;l,&amp;k);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;p[i]),p[i]/=<span class="number">100</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	f[<span class="number">0</span>][<span class="number">0</span>][min(k+<span class="number">200</span>,<span class="number">400</span>)]=<span class="number">1.0</span>;</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</div><div class="line">		<span class="built_in">memset</span>(f[now^<span class="number">1</span>],<span class="number">0</span>,<span class="keyword">sizeof</span>(f[now^<span class="number">1</span>]));</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=i;j++)&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=<span class="number">400</span>;k++)&#123;</div><div class="line">				<span class="keyword">int</span> tmp=k+a[i+<span class="number">1</span>];</div><div class="line">				tmp=min(<span class="number">400</span>,tmp);</div><div class="line">				<span class="keyword">if</span>(tmp&gt;=<span class="number">0</span>) f[now^<span class="number">1</span>][j+<span class="number">1</span>][tmp]+=f[now][j][k]*p[i+<span class="number">1</span>];</div><div class="line">				f[now^<span class="number">1</span>][j][k]+=f[now][j][k]*(<span class="number">1</span>-p[i+<span class="number">1</span>]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		now^=<span class="number">1</span>;</div><div class="line">	&#125; </div><div class="line">	<span class="keyword">double</span> answer=<span class="number">0.0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=l;i&lt;=n;i++)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">200</span>;j&lt;=<span class="number">400</span>;j++)</div><div class="line">		&#123;</div><div class="line">			answer+=f[now][i][j];</div><div class="line">		&#125; </div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%.6lf"</span>,answer);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="终极武器-laser-pas-c-cpp"><a href="#终极武器-laser-pas-c-cpp" class="headerlink" title="终极武器(laser.pas/c/cpp)"></a>终极武器(laser.pas/c/cpp)</h1><h2 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h2><p>经过一番周折，精英队伍的队员们终于来到了关押 applepi 的牢狱面前。心中神一般的领袖 applepi 就在眼前，队员们都不由自主地跪烂膝盖<br>不过令他们沮丧的是，牢狱的大锁没有钥匙孔，黑魔法师 Vani 根本就没有指望它再被打开。幸好队员们携带了新研制的终<br>极武器——k 型氙激光器（Xenon Laser - k，代号 XLk），可以用来破拆这把锁。不过作为一道终极武器，它的启用规则异常严格。</p>
<p>Xenon Laser - k 上共有 N 个波段能够发射激光，每个波段可以一个闭区间 [Ai,Bi] 来表示，其中Bi-1&lt;Ai&lt;Bi，a 为正整数。<br>对于两个数字 p 和 q ，如果对于这 N 个波段内的任意一个整数 num ，把它在十进制表示下的后 k 位中某一位上的 p 换成 q （或者 q 换成 p ），<br>都满足得到的整数仍然在这 N 个波段内，那么称在该激光器中，数字 p 和 q 是 k 等价的。</p>
<p>我们称两两之间 k 等价的数字组成一个 k 等价类。<br>激光器附带了 9 个发射匣，代表 1~9 这 9 个数字。只有把同一个等价类的数字对应的发<br>射匣安置在一排上，Xenon Laser - k 才能够启动。给定 N 个波段，现在就请你求出 1~9 这 9<br>个数字分成了哪些等价类，并且每行输出一个等价类。<br>本题描述比较抽象，请参考样例解释。<br>输入格式<br>第一行两个整数 N , k 。<br>接下来 N 行每行两个整数<br>Ai,Bi<br>a 为正整数，满足<br>Bi-1&lt;Ai&lt;Bi <br> <br>输出格式<br>每行一个 k 等价类，各行之内都按照数字从小到大排序，数字中间没有空格，行与行之<br>间按照等价类中最小的数字从小到大排序。具体格式参考样例。<br>样例输入 1 1<br>1 1<br>1 566<br>样例输出 1 1<br>123456<br>789<br>样例输入 2 2<br>1 2<br>30 75<br>样例输出 2 2<br>12<br>345<br>6<br>7<br>89<br>样例说明<br>第一个样例中k=1，只允许修改个位。对于 1~559 这些数，个位无论如何修改都在波<br>段内。对于 560~566 这些数，个位修改为大于等于 7 的数字时（例如 562 的 2 修改为 8），<br>就不在波段内了。因此 1~6 和 7~9 属于不同的等价类。<br>第二个样例每一位上都可以修改。修改方法与上面一个样例类似。<br>数据范围与约定<br>对于 25% 的数据,1&lt;=n&lt;=50    <br>对于另 25% 的数据, n=1。<br>对于另 30% 的数据，k=1。<br>对于 100% 的数据,n&lt;=10000,1&lt;=k&lt;=10^9,1&lt;=Ai&lt;=Bi&lt;=10^9<br>在所有的数据中，均匀分布着 25% 的随机数据。</p>
<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><p>因为此题是个防AK题<br>所以对于我这个蒟蒻来说，做满分就是不可能的<br>最强的暴力可以做到80分</p>
<h4 id="但我（借鉴别人的做法）只会打65分的做法"><a href="#但我（借鉴别人的做法）只会打65分的做法" class="headerlink" title="但我（借鉴别人的做法）只会打65分的做法"></a>但我<del>（借鉴别人的做法）</del>只会打65分的做法</h4><p>对于每个区间，比如说[15,37]，k=1的时候<br>那么可以把在第k位划分成两个部分</p>
<h4 id="分成-1-4-8-9-这样的两个部分"><a href="#分成-1-4-8-9-这样的两个部分" class="headerlink" title="分成[1-4],[8-9] 这样的两个部分"></a>分成[1-4],[8-9] 这样的两个部分</h4><p>那么有1，2，3 和 7，8，9 一定不是一个类的</p>
<h4 id="这样就可以-在123-和789-两两标记为不行，不是一个等价类的"><a href="#这样就可以-在123-和789-两两标记为不行，不是一个等价类的" class="headerlink" title="这样就可以 在123 和789 两两标记为不行，不是一个等价类的"></a>这样就可以 在123 和789 两两标记为不行，不是一个等价类的</h4><p>每个区间都可以这么划分，最后输出结果就行了<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x7ffffff</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> pleace[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line">ll a[<span class="number">100005</span>],b[<span class="number">100005</span>],flag[<span class="number">20</span>];</div><div class="line">ll ksm[]=&#123;<span class="number">1</span>,<span class="number">1e1</span>,<span class="number">1e2</span>,<span class="number">1e3</span>,<span class="number">1e4</span>,<span class="number">1e5</span>,<span class="number">1e6</span>,<span class="number">1e7</span>,<span class="number">1e8</span>,<span class="number">1e9</span>,<span class="number">1e10</span>,<span class="number">1e11</span>,<span class="number">1e12</span>,<span class="number">1e13</span>,<span class="number">1e14</span>,<span class="number">1e15</span>,<span class="number">1e16</span>,<span class="number">1e17</span>,<span class="number">1e18</span>&#125;;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(ll x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> l=<span class="number">0</span>,r=n+<span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> p1,p2;</div><div class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</div><div class="line">		<span class="keyword">int</span> mid=(l+r)/<span class="number">2</span>+<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(a[mid]&gt;x) r=mid<span class="number">-1</span>;</div><div class="line">		<span class="keyword">else</span> l=mid+<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	p1=l;</div><div class="line">	l=<span class="number">0</span>;r=n+<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</div><div class="line">		<span class="keyword">int</span> mid=(l+r)/<span class="number">2</span>+<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(a[mid]&lt;x) l=mid+<span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> r=mid<span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	p2=l;</div><div class="line">	<span class="keyword">return</span> p1==p2;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> id)</span></span>&#123;</div><div class="line">	ll x1=a[id]/ksm[pos]%<span class="number">10</span>;</div><div class="line">	ll x2=b[id]/ksm[pos]%<span class="number">10</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;x1;i++)&#123;</div><div class="line">		ll num=a[id]-(x1-i)*ksm[pos];</div><div class="line">		<span class="keyword">if</span>(!pd(num))&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=x1;j&lt;=x2;j++)</div><div class="line">				pleace[i][j]=<span class="literal">false</span>,pleace[j][i]=<span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=x2+<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)&#123;</div><div class="line">		ll num=b[id]+(i-x2)*ksm[pos];</div><div class="line">		<span class="keyword">if</span>(!pd(num))&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=x1;j&lt;=x2;j++)</div><div class="line">				pleace[i][j]=<span class="literal">false</span>,pleace[j][i]=<span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(b[id]%ksm[pos]&gt;<span class="number">0</span>)<span class="comment">//特判75这种</span></div><div class="line">	&#123;</div><div class="line">		ll num=(b[id]-b[id]%ksm[pos])+ksm[pos]<span class="number">-1</span>;</div><div class="line">			<span class="keyword">if</span>(!pd(num))&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=x1;j&lt;=x2;j++)</div><div class="line">				pleace[id][j]=pleace[j][id]=<span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125; </div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">9</span>;j++)</div><div class="line">			pleace[i][j]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;a[i],&amp;b[i]);</div><div class="line">	a[<span class="number">0</span>]=b[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">	a[n+<span class="number">1</span>]=b[n+<span class="number">1</span>]=inf;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=k<span class="number">-1</span>;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			check(i,j);	</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)&#123;</div><div class="line">		<span class="keyword">if</span>(!flag[i])&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">9</span>;j++)&#123;</div><div class="line">				<span class="keyword">if</span>(pleace[i][j])</div><div class="line">					<span class="built_in">printf</span>(<span class="string">"%d"</span>,j),flag[j]=<span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/NOIP模拟赛/">NOIP模拟赛</a></li></ul></footer></article><section class="reward"> <a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png" title="QQ"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8yOTYwMy82MTcx"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017 by XLJ</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>