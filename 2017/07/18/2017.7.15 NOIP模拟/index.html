<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="by XLJ"><meta name="description" conauthortent="laji OIer"><link rel="alternative" href="/atom.xml" title="XLJ's blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><title>2017.7.15 NOIP模拟 - XLJ's blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">XLJ's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ（目录）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">について（关于）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/L-link">友達（友链）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-07-18T08:43:03.082Z">July 18, 2017</time><h1 class="post__title"><a href="/2017/07/18/2017.7.15 NOIP模拟/">2017.7.15 NOIP模拟</a></h1><div class="post__main echo"><script>
    if("233"==prompt("Please input password"))
    {
    }
    else
    {
        alert("Wrong");
        location="https://xianglujia.github.io";
    }
</script>

<h1 id="全国信息学分区联赛模拟试题（七）"><a href="#全国信息学分区联赛模拟试题（七）" class="headerlink" title="全国信息学分区联赛模拟试题（七）"></a>全国信息学分区联赛模拟试题（七）</h1><h3 id="【试题概览】"><a href="#【试题概览】" class="headerlink" title="【试题概览】"></a>【试题概览】</h3><table>
<thead>
<tr>
<th>试题名称</th>
<th>塔</th>
<th>圆</th>
<th>猴子</th>
<th>山</th>
</tr>
</thead>
<tbody>
<tr>
<td>提交文件</td>
<td>tower</td>
<td>circle</td>
<td>monkey</td>
<td>hill</td>
</tr>
<tr>
<td>输入文件</td>
<td>tower.in</td>
<td>circle.in</td>
<td>monkey.in</td>
<td>hill.in</td>
</tr>
<tr>
<td>输出文件</td>
<td>tower.out</td>
<td>circle.out</td>
<td>monkey.out</td>
<td>hill.out</td>
</tr>
<tr>
<td>时间限制</td>
<td>1s</td>
<td>1s</td>
<td>1s</td>
<td>1s</td>
</tr>
<tr>
<td>空间限制</td>
<td>128MB</td>
<td>128MB</td>
<td>128MB</td>
<td>128MB</td>
</tr>
<tr>
<td>题目来源</td>
<td>Topcoder</td>
<td>Topcoder</td>
<td>POI X</td>
<td>COI2004</td>
</tr>
</tbody>
</table>
<h2 id="1-塔"><a href="#1-塔" class="headerlink" title="1.塔"></a>1.塔</h2><h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p>给出 N 个木块，告诉你每块木块的高度，你要用这些木块搭出两座高度相同的塔，一座塔的高度为搭建它的木块的<br>高度和，并且一座塔至少要用一块木头。木块只能用一次，也可以不用。问在两座塔的高度相同的限制下，能够搭<br>的塔的最大高度是多少？</p>
<h3 id="【输入文件】"><a href="#【输入文件】" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><p>第一行一个整数 N，表示木块个数；<br>第二行 N 个整数，表示 N 块木块的高度。</p>
<h3 id="【输出文件】"><a href="#【输出文件】" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><p>仅一个数，表示能搭建的最高的塔的高度，若不不能搭建两座相同高度的塔，输出-1。</p>
<h3 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>3<br>2 3 5</p>
<h3 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>5</p>
<h3 id="【数据规模】"><a href="#【数据规模】" class="headerlink" title="【数据规模】"></a>【数据规模】</h3><p>N&lt;=50,每块木块的高度范围[1,500000]，所有木块的高度总和&lt;=500000。</p>
<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>由于高度范围到500000<br>所以显开一个dp[500000][5000000]<br>描述能否达到左塔为i右塔为j的 然后扫描dp[i][i]是不行的<br>所以要改变dp的方式为==差值dp==<br><strong>dp[i][j]表示</strong></p>
<h4 id="前i个木块使两个塔的高度差为j时高塔的高度的最大值"><a href="#前i个木块使两个塔的高度差为j时高塔的高度的最大值" class="headerlink" title="前i个木块使两个塔的高度差为j时高塔的高度的最大值"></a>前i个木块使两个塔的高度差为j时高塔的高度的最大值</h4><p>所以可以由四种状态转移而得来</p>
<h5 id="1-对于木块i不放"><a href="#1-对于木块i不放" class="headerlink" title="1.对于木块i不放"></a>1.对于木块i不放</h5><h5 id="2-放在矮的上面但是高度不超过高的"><a href="#2-放在矮的上面但是高度不超过高的" class="headerlink" title="2.放在矮的上面但是高度不超过高的"></a>2.放在矮的上面但是高度不超过高的</h5><h5 id="3-放在高的上面"><a href="#3-放在高的上面" class="headerlink" title="3.放在高的上面"></a>3.放在高的上面</h5><h5 id="4-放在矮的上面但是超过了高塔的高度"><a href="#4-放在矮的上面但是超过了高塔的高度" class="headerlink" title="4.放在矮的上面但是超过了高塔的高度"></a>4.放在矮的上面但是超过了高塔的高度</h5><p>这样得到转移方程 dp 输出dp[n][0]就行</p>
<h5 id="注意-因为只有dp-0-0-是合法的所以dp-0-0-0"><a href="#注意-因为只有dp-0-0-是合法的所以dp-0-0-0" class="headerlink" title="注意 : 因为只有dp[0][0]是合法的所以dp[0][0]=0;"></a>注意 : 因为只有dp[0][0]是合法的所以dp[0][0]=0;</h5><h5 id="其他的为-inf"><a href="#其他的为-inf" class="headerlink" title="其他的为-inf"></a>其他的为-inf</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x7fffff</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">55</span>];</div><div class="line"><span class="keyword">int</span> dp[<span class="number">55</span>][<span class="number">500005</span>];</div><div class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="comment">//	freopen("tower.in","r",stdin);</span></div><div class="line"><span class="comment">//	freopen("tower.out","w",stdout);</span></div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">		tot+=a[i];</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//printf("tot:%d\n",tot);</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=tot;j++)</div><div class="line">			dp[i][j]=-inf;</div><div class="line">	dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">		<span class="comment">//for(int j=0;j&lt;=tot;j++) dp[i][j]=dp[i-1][j];</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=tot;j++)</div><div class="line">		&#123;</div><div class="line">			dp[i][j]=max(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j+a[i]]);</div><div class="line">			<span class="keyword">if</span>(j&gt;=a[i]) dp[i][j]=max(dp[i][j],dp[i<span class="number">-1</span>][j-a[i]]+a[i]);</div><div class="line">			<span class="keyword">else</span> dp[i][j]=max(dp[i][j],dp[i<span class="number">-1</span>][a[i]-j]+j);</div><div class="line">			<span class="comment">//dp[i][j+a[i]]=max(dp[i-1][j+a[i]],dp[i-1][j]+a[i]);</span></div><div class="line">			<span class="comment">//if(j&lt;=a[i]) dp[i][a[i]-j]=max(dp[i][a[i]-j],dp[i-1][j]+a[i]-j);</span></div><div class="line">		<span class="comment">//	else dp[i][j-a[i]]=max(dp[i][j-a[i]],dp[i-1][j]);</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(dp[n][<span class="number">0</span>]&gt;<span class="number">0</span>)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d"</span>,dp[n][<span class="number">0</span>]);</div><div class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-1"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-圆"><a href="#2-圆" class="headerlink" title="2.圆"></a>2.圆</h2><h3 id="【题目描述】-1"><a href="#【题目描述】-1" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p>给出 N 个圆，保证任意两个圆都是相离的，然后给出两个点(x1,y1)、(x2,y2)，保证均不在某个圆上，要从(x1,y1)到<br>(x2,y2)画条曲线，问这条曲线最少要穿过多少次圆的边界？</p>
<h3 id="【输入文件】-1"><a href="#【输入文件】-1" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><p>第一行一个整数 N，表示圆的个数；<br>第二行 N 个整数，表示 N 个圆的 X 坐标；<br>第三行 N 个整数，表示 N 个圆的 Y 坐标；<br>第四行 N 个整数，表示 N 个圆的半径 R；<br>第五行四个整数 x1,y1,x2,y2。</p>
<h3 id="【输出文件】-1"><a href="#【输出文件】-1" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><p>仅一个数，表示最少要穿过多少次圆的边界。</p>
<h3 id="【样例输入-1】"><a href="#【样例输入-1】" class="headerlink" title="【样例输入 1】"></a>【样例输入 1】</h3><p>1<br>0<br>0<br>2<br>-5 1 5 1</p>
<h3 id="【样例输出-1】"><a href="#【样例输出-1】" class="headerlink" title="【样例输出 1】"></a>【样例输出 1】</h3><p>0</p>
<h3 id="【样例输入-2】"><a href="#【样例输入-2】" class="headerlink" title="【样例输入 2】"></a>【样例输入 2】</h3><p>7<br>1  -3  2 5 -4 12 12<br>1 -1 2 5 5 1 1<br>8 1 2 1 1 1 2<br>-5 1 12 1</p>
<h3 id="【样例输出-2】"><a href="#【样例输出-2】" class="headerlink" title="【样例输出 2】"></a>【样例输出 2】</h3><p>3</p>
<h3 id="【数据规模】-1"><a href="#【数据规模】-1" class="headerlink" title="【数据规模】"></a>【数据规模】</h3><p>1&lt;=N&lt;=50，坐标范围[-1000,1000]，每个圆的半径 1&lt;=R&lt;=1000。<br>保证没有两个圆有公共点，起点和终点不会落在某个圆的边界上。</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>找x1,y1和x2,y2分别在几个圆里面<br>如果都在一个圆里面 就不算<br>输出cnt1+cnt2就行了<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> X 1001</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> ctx1=<span class="number">0</span>,ctx2=<span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> x;<span class="keyword">int</span> y;<span class="keyword">int</span> x2;<span class="keyword">int</span> y2;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">	<span class="keyword">int</span> x,y,r;</div><div class="line">&#125;c[<span class="number">55</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">incircle</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> t1=x-a;<span class="keyword">int</span> t2=y-b;</div><div class="line">	<span class="keyword">if</span>(t1*t1+t2*t2&lt;=r*r) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> flagx1=<span class="number">0</span>;<span class="keyword">bool</span> flagx2=<span class="number">0</span>;</div><div class="line"><span class="comment">/*</span></div><div class="line">void rep(int x,int y,int a,int b)&#123;</div><div class="line">	if(2*y-b&lt;=2001&amp;&amp;2*y-b!=b)</div><div class="line">		mp[a][2*y-b]++;</div><div class="line">	if(2*x-a&lt;=2001&amp;&amp;2*x-a!=a)</div><div class="line">		mp[2*x-a][b]++; </div><div class="line">	if(2*y-b&lt;=2001&amp;&amp;2*x-a&lt;=2001&amp;&amp;2*x-a!=a&amp;&amp;2*y-b!=b)</div><div class="line">		mp[2*x-a][2*y-b]++;</div><div class="line">&#125;*/</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> tx=c[p].x,ty=c[p].y,tr=c[p].r;</div><div class="line">	flagx1=<span class="number">0</span>;flagx2=<span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span>(incircle(tx,ty,x,y,tr))	</div><div class="line">		flagx1=<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(incircle(tx,ty,x2,y2,tr))	</div><div class="line">		flagx2=<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (flagx1&amp;&amp;flagx2) <span class="keyword">return</span> ;</div><div class="line">	<span class="keyword">else</span>&#123;</div><div class="line">		<span class="keyword">if</span>(flagx1) ctx1++;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(flagx2) ctx2++;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//printf("mp: %d",mp[996][1002]);</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"circle.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"circle.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i].x);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i].y);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i].r);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		c[i].x+=X;c[i].y+=X;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;x,&amp;y,&amp;x2,&amp;y2);</div><div class="line">	x+=X;x2+=X;y+=X;y2+=X;</div><div class="line">	<span class="keyword">if</span>(x==x2&amp;&amp;y==y2)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"0"</span>);</div><div class="line">		<span class="keyword">return</span>  <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line"> 		solve(i);</div><div class="line"> 	<span class="comment">//printf("%d %d",ctx1,ctx2);</span></div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ctx1+ctx2);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="3-猴子"><a href="#3-猴子" class="headerlink" title="3.猴子"></a>3.猴子</h2><h3 id="【题目描述】-2"><a href="#【题目描述】-2" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p>有 N 只猴子，第一只尾巴挂在树上，剩下的 N-1 只，要么被其它的猴子抓住，要么抓住了其它的猴子，要么两者均<br>有。当然一只猴子最多抓两只另外的猴子，只有两只手嘛。现在给出这 N 只猴子抓与被抓的信息，并且在某个时刻<br>可能某只猴子会放掉左手或右手的猴子，导致某些猴子落在地上。求每只猴子落地的时间。</p>
<h3 id="【输入文件】-2"><a href="#【输入文件】-2" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><p>第一行两个数 N、M，表示有 N 只猴子，并且总时间为 M-1。<br>接下来 N 行，描述了每只猴子的信息，每行两个数，分别表示这只猴子左手和右手抓的猴子的编号，如果是-1，表<br>示该猴子那只手没抓其它的猴子。再接下来 M 行，按时间顺序给出了一些猴子放手的信息，第 1+N+i 行表示第 i-1<br>时刻某只猴子的放手信息，信息以两个数给出，前者表示放手的猴子的编号，后者表示其放的哪只手，1 表示左手 ，<br>2 表示右手。</p>
<h3 id="【输出文件】-2"><a href="#【输出文件】-2" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><p>共 N 行，第 i 行表示第 i 只猴子掉落的时刻，若第 i 只猴子到 M-1 时刻以后还没掉落，就输出-1。</p>
<h3 id="【样例输入】-1"><a href="#【样例输入】-1" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>3 2<br>-1 3<br>3 -1<br>1 2<br>1 2<br>3 1</p>
<h3 id="【样例输出】-1"><a href="#【样例输出】-1" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>-1<br>1<br>1</p>
<h3 id="【数据规模】-2"><a href="#【数据规模】-2" class="headerlink" title="【数据规模】"></a>【数据规模】</h3><p>30%的数据，N&lt;=1000，M&lt;=1000；<br>100%的数据，1&lt;=N&lt;=200000,1&lt;=M&lt;=400000。</p>
<h3 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h3><p>比较难的一题<br>要反过来思考<br>首先求出m-1秒后猴子的情况</p>
<h4 id="然后反过来-把从猴子上掉下来看为从地上接上去"><a href="#然后反过来-把从猴子上掉下来看为从地上接上去" class="headerlink" title="然后反过来 ==把从猴子上掉下来看为从地上接上去=="></a>然后反过来 ==把从猴子上掉下来看为从地上接上去==</h4><h4 id="那么如果接到了一个有1的连通块"><a href="#那么如果接到了一个有1的连通块" class="headerlink" title="那么如果接到了一个有1的连通块"></a>那么如果接到了一个有1的连通块</h4><h4 id="那么就是这个时候从1这个连通块上面掉下来的"><a href="#那么就是这个时候从1这个连通块上面掉下来的" class="headerlink" title="那么就是这个时候从1这个连通块上面掉下来的"></a>那么就是这个时候从1这个连通块上面掉下来的</h4><p>这样 此题就变成了一个简单的并查集的题目<br>每次用并查集维护连通块 记录时间即可</p>
<h4 id="关于为什么要重新在输出的时候findf一遍的原因"><a href="#关于为什么要重新在输出的时候findf一遍的原因" class="headerlink" title="关于为什么要重新在输出的时候findf一遍的原因"></a>关于为什么要重新在输出的时候findf一遍的原因</h4><h4 id="因为在之前的findf只是把要松手的猴子findf一遍"><a href="#因为在之前的findf只是把要松手的猴子findf一遍" class="headerlink" title="因为在之前的findf只是把要松手的猴子findf一遍"></a>因为在之前的findf只是把要松手的猴子findf一遍</h4><h4 id="比如说"><a href="#比如说" class="headerlink" title="比如说"></a>比如说</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">5 2</div><div class="line">2 -1</div><div class="line">3 -1</div><div class="line">4 -1</div><div class="line">5 -1</div><div class="line">-1 -1</div><div class="line">1 1</div><div class="line">4 5</div></pre></td></tr></table></figure>
<p>这组数据就是一条链<br>然后1 2放手 4 5放手<br>把3 这个点夹在了中间</p>
<h4 id="但是没有最后一遍的findf-3的时间就是找不到的"><a href="#但是没有最后一遍的findf-3的时间就是找不到的" class="headerlink" title="但是没有最后一遍的findf 3的时间就是找不到的"></a>但是没有最后一遍的findf 3的时间就是找不到的</h4><h4 id="所以要多findf一遍"><a href="#所以要多findf一遍" class="headerlink" title="所以要多findf一遍"></a>所以要多findf一遍</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">2000005</span>][<span class="number">3</span>];</div><div class="line"><span class="keyword">int</span> fa[<span class="number">2000005</span>],time[<span class="number">2000005</span>];</div><div class="line"><span class="keyword">bool</span> mk[<span class="number">2000005</span>][<span class="number">3</span>];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">&#125;e[<span class="number">400005</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">findf</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(fa[x]==x) <span class="keyword">return</span> x;</div><div class="line">	<span class="keyword">else</span>&#123;</div><div class="line">		<span class="keyword">int</span> tmp=fa[x];</div><div class="line">		fa[x]=findf(fa[x]);</div><div class="line">		<span class="keyword">if</span>(time[tmp]&lt;time[x]) time[x]=time[tmp];</div><div class="line">		<span class="keyword">return</span> fa[x];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> t)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(x==<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		fa[y]=x;</div><div class="line">		time[y]=t;</div><div class="line">	&#125; </div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(y==<span class="number">1</span>)&#123;</div><div class="line">		fa[x]=y;</div><div class="line">		time[x]=t;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> fa[x]=y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; </div><div class="line">	freopen(<span class="string">"monkey.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"money.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n,m;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a[i][<span class="number">1</span>],&amp;a[i][<span class="number">2</span>]);</div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		mk[x][y]=<span class="number">1</span>;</div><div class="line">		e[i].x=x;e[i].y=y;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">memset</span>(time,<span class="number">127</span>,<span class="keyword">sizeof</span>(time));</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">2</span>;j++)&#123;</div><div class="line">			<span class="keyword">if</span>(!mk[i][j]&amp;&amp;a[i][j]!=<span class="number">-1</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">int</span> x=findf(i),y=findf(a[i][j]);</div><div class="line">				<span class="keyword">if</span>(x!=y) merge(x,y,m);</div><div class="line">			&#125;</div><div class="line">		&#125;<span class="comment">//先处理m-1秒之后的情况 没有断的先连在一起 </span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=m<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</div><div class="line">		<span class="keyword">if</span>(a[e[i].x][e[i].y]!=<span class="number">-1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> x=findf(e[i].x);</div><div class="line">			<span class="keyword">int</span> y=findf(a[e[i].x][e[i].y]);</div><div class="line">			<span class="keyword">if</span>(x!=y) merge(x,y,i);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		findf(i);<span class="comment">//重新dfs 很关键</span></div><div class="line">		<span class="keyword">if</span>(time[i]&gt;=m) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,time[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-山"><a href="#4-山" class="headerlink" title="4.山"></a>4.山</h2><h3 id="【题目描述】-3"><a href="#【题目描述】-3" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p>给一座山，如图所示<br>省略图片…<br>现在要在山上的某个部位装一盏灯，使得这座山的任何一个部位都能够被看到。给出最小的 y 坐标，如图的+号处<br>就是 y 坐标最小的安装灯的地方。</p>
<h3 id="【输入文件】-3"><a href="#【输入文件】-3" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><p>第一行一个数 N，表示这座山有 N 个点构成，接下来 N 行从左到右给出了这座山的构造情况，每行两个数 Xi，Yi ，<br>表示一个折点，保证 Xi&gt;Xi-1（1&lt;i&lt;=N)。</p>
<h3 id="【输出文件】-3"><a href="#【输出文件】-3" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><p>仅输出一行，为最小的 y 坐标，当你的答案与标准答案相差 0.01 时，则被认为是正确的。</p>
<h3 id="【样例输入】-2"><a href="#【样例输入】-2" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>6<br>0 0<br>10 0<br>11 1<br>15 1<br>16 0<br>25 0</p>
<h3 id="【样例输出】-2"><a href="#【样例输出】-2" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>3.00</p>
<h3 id="【数据规模】-3"><a href="#【数据规模】-3" class="headerlink" title="【数据规模】"></a>【数据规模】</h3><p>30%的数据，1&lt;=N&lt;=50;<br>100%的数据，1&lt;=N&lt;=5000，0&lt;=Xi,Yi&lt;=100000，保证答案不超过 1000000。</p>
<h2 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h2><p>对于每个直线 算出解析式<br>因为要求的是高度 那么二分一个高度值<br>对于一个直线<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">f(x)=kx+b</div></pre></td></tr></table></figure></p>
<p>那么这个答案点是要满足在所有直线所夹之间的（平行的线就在上方)</p>
<h3 id="可以二分答案"><a href="#可以二分答案" class="headerlink" title="可以二分答案"></a>可以二分答案</h3><h3 id="所以把每个二分的答案"><a href="#所以把每个二分的答案" class="headerlink" title="所以把每个二分的答案"></a>所以把每个二分的答案</h3><p>代入算一个x的取值范围：从l到r<br>如果满足l&lt;r 此时说明 对应y有x成立</p>
<h4 id="判断直线的k值"><a href="#判断直线的k值" class="headerlink" title="判断直线的k值"></a>判断直线的k值</h4><h4 id="如果k-gt-0-说明可以更新一个有端点"><a href="#如果k-gt-0-说明可以更新一个有端点" class="headerlink" title="如果k&gt;0 说明可以更新一个有端点"></a>如果k&gt;0 说明可以更新一个有端点</h4><h4 id="k-0-就判断y值和y-kx-b中的b-如果b大于y-则不合法"><a href="#k-0-就判断y值和y-kx-b中的b-如果b大于y-则不合法" class="headerlink" title="k==0 就判断y值和y=kx+b中的b 如果b大于y 则不合法"></a>k==0 就判断y值和y=kx+b中的b 如果b大于y 则不合法</h4><h4 id="k-lt-0-同理更新左端点"><a href="#k-lt-0-同理更新左端点" class="headerlink" title="k&lt;0 同理更新左端点"></a>k&lt;0 同理更新左端点</h4><h4 id="那么y可以向小的尝试-r-mid"><a href="#那么y可以向小的尝试-r-mid" class="headerlink" title="那么y可以向小的尝试(r=mid)"></a>那么y可以向小的尝试(r=mid)</h4><h4 id="否则-l-mid"><a href="#否则-l-mid" class="headerlink" title="否则(l=mid)"></a>否则(l=mid)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream&gt;</div><div class="line">#include&lt;cstdio&gt;</div><div class="line">#include&lt;cstdlib&gt;</div><div class="line">#include&lt;cstring&gt;</div><div class="line">#include&lt;algorithm&gt;</div><div class="line">#include&lt;cmath&gt;</div><div class="line">#include&lt;queue&gt;</div><div class="line">#define eps 1e-8</div><div class="line">#define inf 0x7ffffff</div><div class="line">using namespace std;</div><div class="line">struct node&#123;</div><div class="line">	double k,b;</div><div class="line">&#125;line[15005];</div><div class="line">int n;</div><div class="line">double x[15005],y[15005];</div><div class="line">bool check(double y)&#123;</div><div class="line">	double l=-inf,r=inf;</div><div class="line">	for(int i=1;i&lt;=n-1;i++)&#123;</div><div class="line">		if(line[i].k&gt;0)&#123;</div><div class="line">			double xx=(y-line[i].b)/line[i].k;</div><div class="line">			r=min(xx,r);</div><div class="line">		&#125;</div><div class="line">		if(line[i].k==0&amp;&amp;line[i].b&gt;y) return false;</div><div class="line">		if(line[i].k&lt;0)&#123;</div><div class="line">			double xx=(y-line[i].b)/line[i].k;</div><div class="line">			l=max(xx,l);</div><div class="line">		&#125;</div><div class="line">		if(l&gt;r) return false;</div><div class="line">	&#125; </div><div class="line">	return true;</div><div class="line">&#125;</div><div class="line">int main()&#123;</div><div class="line">	//freopen(&quot;hill.in&quot;,&quot;r&quot;,stdin);</div><div class="line">	//freopen(&quot;hill.out&quot;,&quot;w&quot;,stdout);</div><div class="line">	scanf(&quot;%d&quot;,&amp;n);</div><div class="line">	double l=0,r=1000000;</div><div class="line">	double ans=0;</div><div class="line">	scanf(&quot;%lf%lf&quot;,&amp;x[1],&amp;y[1]);</div><div class="line">	for(int i=2;i&lt;=n;i++)&#123;</div><div class="line">		scanf(&quot;%lf%lf&quot;,&amp;x[i],&amp;y[i]);</div><div class="line">		double disy=(y[i]-y[i-1]);double disx=(x[i]-x[i-1]);</div><div class="line">			double k=disy/disx;</div><div class="line">			double b=y[i]-k*x[i];</div><div class="line">			line[i-1].k=k;line[i-1].b=b;</div><div class="line">	&#125;</div><div class="line">	while(l+0.001&lt;r)&#123;</div><div class="line">		double mid=(l+r)/2;</div><div class="line">		if(check(mid))&#123;</div><div class="line">			ans=r=mid;</div><div class="line">		&#125;</div><div class="line">		else l=mid;</div><div class="line">	&#125;</div><div class="line">	printf(&quot;%lf&quot;,ans);</div><div class="line">	return 0;	</div><div class="line">&#125;</div></pre></td></tr></table></figure></div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/NOIP模拟赛/">NOIP模拟赛</a></li></ul></footer></article><section class="reward"> <a class="btn-reward" href="#">加好友 or 打赏</a><div class="reward-wrapper clearfix"><img src="/img/QQ.jpg" title="QQ"><img src="/img/wechat.jpg" title="微信"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8yOTYwMy82MTcx"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017 by XLJ<a href="https://xianglujia.github.io/about/" target="view_window" style="color:#666;"> Welcome! </a></div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>