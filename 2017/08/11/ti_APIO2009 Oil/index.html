<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="by XLJ"><meta name="description" conauthortent="laji OIer"><link rel="alternative" href="/atom.xml" title="XLJ's blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><title>APIO2009 Oil - XLJ's blog</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">XLJ's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ（目录）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">について（关于）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/L-link">友達（友链）</a></li><li class="head-nav__item"><a class="head-nav__link" href="/need_password">パスワード</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-08-11T13:26:48.276Z">August 11, 2017</time><h1 class="post__title"><a href="/2017/08/11/ti_APIO2009 Oil/">APIO2009 Oil</a></h1><div class="post__main echo"><h3 id="传送门"><a href="#传送门" class="headerlink" title="传送门"></a><a href="https://www.luogu.org/problem/show?pid=3625" target="_blank" rel="external">传送门</a></h3><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>Siruseri 政府决定将石油资源丰富的 Navalur 省的土地拍卖给私人承包商以 建立油井。被拍卖的整块土地为一个矩形区域，被划分为 M×N 个小块。 Siruseri 地质调查局有关于 Navalur 土地石油储量的估测数据。这些数据表示 为 M×N 个正整数，即对每一小块土地石油储量的估计值。 为了避免出现垄断，政府规定每一个承包商只能承包一个由 K×K 块相连的 土地构成的正方形区域。 AoE 石油联合公司由三个承包商组成，他们想选择三块互不相交的 K×K 的 区域使得总的收益最大。 例如，假设石油储量的估计值如下：</p>
<p>1 1 1 1 1 1 1 1 1<br>1 1 1 1 1 1 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 1 1 1 8 8 8 1 1<br>1 1 1 1 1 1 8 8 8<br>1 1 1 1 1 1 9 9 9<br>1 1 1 1 1 1 9 9 9 </p>
<p>如果 K = 2, AoE 公司可以承包的区域的石油储量总和为 100, 如果 K = 3, AoE 公司可以承包的区域的石油储量总和为 208。 AoE 公司雇佣你来写一个程序，帮助计算出他们可以承包的区域的石油储量 之和的最大值。</p>
<h2 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h2><h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>输入第一行包含三个整数 M, N, K，其中 M 和 N 是矩形区域的行数和列数， K 是每一个承包商承包的正方形的大小（边长的块数）。接下来 M 行，每行有 N 个正整数表示这一行每一小块土地的石油储量的估计值。</p>
<h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>输出只包含一个正整数，表示 AoE 公司可以承包的区域的石油储量之和的 最大值。</p>
<h2 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><h3 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h3><p>9 9 3<br>1 1 1 1 1 1 1 1 1<br>1 1 1 1 1 1 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 1 1 1 8 8 8 1 1<br>1 1 1 1 1 1 8 8 8<br>1 1 1 1 1 1 9 9 9<br>1 1 1 1 1 1 9 9 9 </p>
<h3 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h3><p>208</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>数据保证 K≤M 且 K≤N 并且至少有三个 K×K 的互不相交的正方形区域。<br>其 中 30%的输入数据，M, N≤ 12。所有的输入数据, M, N≤ 1500。每一小块土地的 石油储量的估计值是非负整数且≤ 500。</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>又是一个神题啊，本蒟蒻只有看了题解才会写。。<br>其实想清楚了本题就根本不难<br>首先考虑这题肯定要用到前缀和，那么怎么用就是一个问题了<br>一个矩形，分三块，有六种方法 如图<br><img src="http://img.blog.csdn.net/20160425101932088" alt="这里写图片描述"><br><strong>分别在三个部分中找的k*k面积最大的，加起来就是答案</strong><br>那么怎么表示这三个块中面积最大的呢？<br>就需要记录对于每个点<br>它<strong>左上，右上，左下，右下</strong>的四个部分中，<strong>最大的K*K块的价值和</strong><br>这个样子：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a[<span class="number">2000</span>][<span class="number">2000</span>],b[<span class="number">2000</span>][<span class="number">2000</span>],c[<span class="number">2000</span>][<span class="number">2000</span>],d[<span class="number">2000</span>][<span class="number">2000</span>];</div><div class="line"><span class="comment">//我的代码中a表示左上，b右上，c左下，d右下</span></div></pre></td></tr></table></figure></p>
<p>怎么算这abcd四个二维数组呢：<br><strong>一个s[][]二维数组记录，s[i][j]表示以i，j为右下角的K*K正方形的石油储量之和</strong><br>那么递推可以推出a,b,c,d</p>
<p>得到abcd以后就分6个情况更新最大值，代码如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][j]+b[i][j+k]+c[i+k][m]);</div><div class="line">rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][m]+c[i+k][j]+d[i+k][j+k]);	</div><div class="line">rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][j]+b[n][j+k]+c[i+k][j]);</div><div class="line">rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[n][j]+b[i][j+k]+d[i+k][j+k]);</div><div class="line">rep(i,k,n-k) rep(j,k+k,m-k) ans=max(ans,a[n][j-k]+b[n][j+k]+mp[i][j]);</div><div class="line">rep(i,k+k,n-k) rep(j,k,m-k) ans=max(ans,a[i-k][m]+c[i+k][m]+mp[i][j]);</div></pre></td></tr></table></figure>
<p>代码对应的情况如图<br><img src="https://i.loli.net/2017/08/11/598db2ae13756.bmp" alt="image"><br>因为我在计算abcd的时候存的是正方形的右下角，所以+k才可以得到左上左下右上右下的值<br>自己画画图想想即可<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FI for(int i=1;i&lt;=n;i++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FJ for(int j=1;j&lt;=m;j++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FDI for(int i=n;i&gt;=k;i--)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FDJ for(int j=m;j&gt;=k;j--)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FUI for(int i=k;i&lt;=n;i++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FUJ for(int j=k;j&lt;=m;j++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x,y) for(int i=x;i&lt;=y;i++)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,x,y) for(int i=x;i&gt;=y;i--)<span class="comment">//偷个懒</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> mp[<span class="number">2000</span>][<span class="number">2000</span>];</div><div class="line"><span class="keyword">int</span> a[<span class="number">2000</span>][<span class="number">2000</span>],b[<span class="number">2000</span>][<span class="number">2000</span>],c[<span class="number">2000</span>][<span class="number">2000</span>],d[<span class="number">2000</span>][<span class="number">2000</span>];</div><div class="line"><span class="keyword">int</span> n,m,k;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="comment">//freopen("C:\\Users\\pc\\Desktop\\input.txt","r",stdin);</span></div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</div><div class="line">	<span class="keyword">int</span> x;</div><div class="line">	<span class="keyword">int</span> cnt=<span class="number">1</span>;</div><div class="line">	FI FJ&#123;</div><div class="line">		<span class="comment">//printf("%d\n",cnt++);</span></div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		mp[i][j]=mp[i<span class="number">-1</span>][j]+mp[i][j<span class="number">-1</span>]-mp[i<span class="number">-1</span>][j<span class="number">-1</span>]+x;	</div><div class="line">	&#125;</div><div class="line">	FDI FDJ	mp[i][j]-=mp[i-k][j]+mp[i][j-k]-mp[i-k][j-k];<span class="comment">//mp的意义是以i，j为右下角的K*K正方形的石油储量之和</span></div><div class="line">	FUI FUJ	a[i][j]=max(mp[i][j],max(a[i<span class="number">-1</span>][j],a[i][j<span class="number">-1</span>]));</div><div class="line">	FUI FDJ b[i][j]=max(mp[i][j],max(b[i<span class="number">-1</span>][j],b[i][j+<span class="number">1</span>]));</div><div class="line">	FDI FUJ c[i][j]=max(mp[i][j],max(c[i+<span class="number">1</span>][j],c[i][j<span class="number">-1</span>]));</div><div class="line">	FDI FDJ d[i][j]=max(mp[i][j],max(d[i+<span class="number">1</span>][j],d[i][j+<span class="number">1</span>]));<span class="comment">//初始化abcd</span></div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][j]+b[i][j+k]+c[i+k][m]);</div><div class="line">	rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][m]+c[i+k][j]+d[i+k][j+k]);	</div><div class="line">	rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[i][j]+b[n][j+k]+c[i+k][j]);</div><div class="line">	rep(i,k,n-k) rep(j,k,m-k) ans=max(ans,a[n][j]+b[i][j+k]+d[i+k][j+k]);</div><div class="line">	rep(i,k,n-k) rep(j,k+k,m-k) ans=max(ans,a[n][j-k]+b[n][j+k]+mp[i][j]);</div><div class="line">	rep(i,k+k,n-k) rep(j,k,m-k) ans=max(ans,a[i-k][m]+c[i+k][m]+mp[i][j]);</div><div class="line">	<span class="comment">//更新答案</span></div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/APIO/">APIO</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/递推/">递推</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/前缀和/">前缀和</a></li></ul></footer></article><section class="reward"> <a class="btn-reward" href="#">加好友 or 打赏</a><div class="reward-wrapper clearfix"><img src="/img/QQ.jpg" title="QQ"><img src="/img/wechat.jpg" title="微信"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8yOTYwMy82MTcx"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017 by XLJ<a href="https://xianglujia.github.io/about/" target="view_window" style="color:#666;"> Welcome! </a></div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>